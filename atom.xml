<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>EnjoyToShare</title>
  
  <subtitle>身体和灵魂总要有一个在路上</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://wugenqiang.github.io/"/>
  <updated>2019-03-16T11:38:24.000Z</updated>
  <id>http://wugenqiang.github.io/</id>
  
  <author>
    <name>WuGenQiang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Springboot实现小程序端发送邮箱验证码功能</title>
    <link href="http://wugenqiang.github.io/2019/03/16/Springboot%E5%AE%9E%E7%8E%B0%E9%82%AE%E7%AE%B1%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8A%9F%E8%83%BD/"/>
    <id>http://wugenqiang.github.io/2019/03/16/Springboot实现邮箱验证码功能/</id>
    <published>2019-03-16T11:38:24.000Z</published>
    <updated>2019-03-16T11:38:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Springboot实现小程序端的邮箱验证"><a href="#Springboot实现小程序端的邮箱验证" class="headerlink" title="Springboot实现小程序端的邮箱验证"></a>Springboot实现小程序端的邮箱验证</h1><h2 id="一、配置项"><a href="#一、配置项" class="headerlink" title="一、配置项"></a>一、配置项</h2><ol><li>配置pom文件，引入发送邮件的依赖</li></ol><p>在pom文件中添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--邮件发送核心包--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>修改配置文件application.yml，这里以QQ邮箱为例</li></ol><p>我这里使用的是yml方式，当然也可以采用properties方式来写</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#邮件发送配置</span><br><span class="line">spring:</span><br><span class="line">  mail:</span><br><span class="line">    default-encoding: UTF-8</span><br><span class="line">    host: smtp.qq.com</span><br><span class="line">    username: 你的邮箱</span><br><span class="line">    password: 邮箱授权码</span><br><span class="line">    properties:</span><br><span class="line">      mail:</span><br><span class="line">        smtp:</span><br><span class="line">          auth: true</span><br><span class="line">          starttls:</span><br><span class="line">            enable: true</span><br><span class="line">            required: true</span><br></pre></td></tr></table></figure><p><em>邮箱授权码可以按以下方法获取:</em></p><p><em>打开QQ邮箱网页→设置→账户→POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务→开启POP3/SMTP服务，然后就能看到授权码了</em></p><p><img src="https://i.loli.net/2019/03/16/5c8c8a7252fef.png" alt="邮箱验证01.png"></p><h2 id="二、编写mailService和mailServiceImpl"><a href="#二、编写mailService和mailServiceImpl" class="headerlink" title="二、编写mailService和mailServiceImpl"></a>二、编写mailService和mailServiceImpl</h2><p>即邮件服务层和邮件服务接口实现层</p><p>${spring.mail.username}是在yml中配置的属性，这里有一个方法，第一个是发送普通邮件，第二个是发送带有附件的邮件</p><ol><li>邮件服务层（IMailService）</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public interface IMailService &#123;</span><br><span class="line"></span><br><span class="line">    //发送普通邮件</span><br><span class="line">    void sendSimpleMail(String to,String title,String content);</span><br><span class="line"></span><br><span class="line">    //发送带有附件的邮件</span><br><span class="line">    void sendAttachmentsMail(String to, String title, String content, List&lt;File&gt; fileList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>邮件服务接口实现层（MailServiceImpl）</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class MailServiceImpl implements IMailService &#123;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span><br><span class="line">    private String from;</span><br><span class="line"></span><br><span class="line">    @Resource</span><br><span class="line">    private JavaMailSender mailSender;</span><br><span class="line"></span><br><span class="line">    Logger logger = LoggerFactory.getLogger(this.getClass());</span><br><span class="line"></span><br><span class="line">    //发送普通邮件</span><br><span class="line">    @Override</span><br><span class="line">    public void sendSimpleMail(String to, String title, String content) &#123;</span><br><span class="line"></span><br><span class="line">        SimpleMailMessage message = new SimpleMailMessage();</span><br><span class="line">        message.setFrom(from);</span><br><span class="line">        message.setTo(to);</span><br><span class="line">        message.setSubject(title);</span><br><span class="line">        message.setText(content);</span><br><span class="line">        mailSender.send(message);</span><br><span class="line">        logger.info(&quot;邮件发送成功&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //发送带有附件的邮件</span><br><span class="line">    @Override</span><br><span class="line">    public void sendAttachmentsMail(String to, String title, String content, List&lt;File&gt; fileList) &#123;</span><br><span class="line"></span><br><span class="line">        MimeMessage message = mailSender.createMimeMessage();</span><br><span class="line">        try &#123;</span><br><span class="line">            MimeMessageHelper helper = new MimeMessageHelper(message,true);</span><br><span class="line">            helper.setFrom(from);</span><br><span class="line">            helper.setTo(to);</span><br><span class="line">            helper.setSubject(title);</span><br><span class="line">            helper.setText(content);</span><br><span class="line">            String fileName = null;</span><br><span class="line">            for (File file:fileList) &#123;</span><br><span class="line">                fileName = MimeUtility.encodeText(file.getName(), &quot;GB2312&quot;, &quot;B&quot;);</span><br><span class="line">                helper.addAttachment(fileName, file);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        mailSender.send(message);</span><br><span class="line">        logger.info(&quot;邮件发送成功&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="三、编写controller"><a href="#三、编写controller" class="headerlink" title="三、编写controller"></a>三、编写controller</h2><p>即邮件发送控制层</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//获取邮箱验证的验证码</span><br><span class="line">    @RequestMapping(&quot;/getCheckCode&quot;)</span><br><span class="line">    public JsonResult getCheckCode(HttpServletRequest request) &#123;</span><br><span class="line">        //获取微信小程序get的参数值并打印</span><br><span class="line">        String userEmail = request.getParameter(&quot;userEmail&quot;);</span><br><span class="line">        user = userService.queryUserByUserEmail(userEmail);</span><br><span class="line">        if (null == user) &#123;</span><br><span class="line">            return new JsonResult(JsonResponseStatus.EMPTY.getCode(), JsonResponseStatus.EMPTY.getMsg());</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            String checkCode = String.valueOf(new Random().nextInt(899999) + 100000);</span><br><span class="line">            String message = &quot;您的注册验证码为：&quot;+checkCode;</span><br><span class="line">            try &#123;</span><br><span class="line">                mailService.sendSimpleMail(userEmail, &quot;注册验证码&quot;, message);</span><br><span class="line">            &#125;catch (Exception e)&#123;</span><br><span class="line">                return new JsonResult(JsonResponseStatus.EMPTY.getCode(), JsonResponseStatus.EMPTY.getMsg());</span><br><span class="line">            &#125;</span><br><span class="line">            return new JsonResult(JsonResponseStatus.SUCCESS.getCode(), JsonResponseStatus.SUCCESS.getMsg(),checkCode);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><em>附Web网页上可以用的控制层代码：</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class MailController &#123;</span><br><span class="line">    </span><br><span class="line">    @Resource</span><br><span class="line">    private IMailService mailService;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;getCheckCode&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public String getCheckCode(String email)&#123;</span><br><span class="line">        String checkCode = String.valueOf(new Random().nextInt(899999) + 100000);</span><br><span class="line">        String message = &quot;您的注册验证码为：&quot;+checkCode;</span><br><span class="line">        try &#123;</span><br><span class="line">            mailService.sendSimpleMail(email, &quot;注册验证码&quot;, message);</span><br><span class="line">        &#125;catch (Exception e)&#123;</span><br><span class="line">            return &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        return checkCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四、编写小程序邮箱验证页面"><a href="#四、编写小程序邮箱验证页面" class="headerlink" title="四、编写小程序邮箱验证页面"></a>四、编写小程序邮箱验证页面</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/getCheckCode/getCheckCode.wxml--&gt;</span><br><span class="line">&lt;form bindsubmit=&quot;getCheckCode&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;form-list&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;form-item&quot;&gt;</span><br><span class="line">      &lt;view class=&quot;form-item-hd&quot;&gt;邮箱&lt;/view&gt;</span><br><span class="line">      &lt;view class=&quot;form-item-bd&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;email&quot; name=&quot;userEmail&quot; value=&quot;&#123;&#123;userEmail&#125;&#125;&quot; placeholder=&quot;请输入邮箱&quot; maxlength=&quot;25&quot; /&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">  &lt;!--按钮--&gt;</span><br><span class="line">  &lt;button formType=&quot;submit&quot; class=&quot;edit-btn&quot;&gt;获取验证码&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;form bindsubmit=&quot;toPasswordReset&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;form-list&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;form-item&quot;&gt;</span><br><span class="line">      &lt;view class=&quot;form-item-hd&quot;&gt;验证码&lt;/view&gt;</span><br><span class="line">      &lt;view class=&quot;form-item-bd&quot;&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;checkCode&quot; value=&quot;&#123;&#123;checkCode&#125;&#125;&quot; placeholder=&quot;请输入验证码&quot; maxlength=&quot;20&quot; /&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">  &lt;button formType=&quot;submit&quot; class=&quot;edit-btn&quot;&gt;进行验证&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><h2 id="五、测试"><a href="#五、测试" class="headerlink" title="五、测试"></a>五、测试</h2><p><img src="https://i.loli.net/2019/03/16/5c8cc99015151.png" alt="邮箱验证03.png"></p><p><img src="https://i.loli.net/2019/03/16/5c8cc9a7008c2.png" alt="邮箱验证04.png"></p><p>好了，就分享到这边了啊，有问题可以在下面留言…</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Springboot实现小程序端的邮箱验证&quot;&gt;&lt;a href=&quot;#Springboot实现小程序端的邮箱验证&quot; class=&quot;headerlink&quot; title=&quot;Springboot实现小程序端的邮箱验证&quot;&gt;&lt;/a&gt;Springboot实现小程序端的邮箱验证&lt;/
      
    
    </summary>
    
      <category term="Springboot" scheme="http://wugenqiang.github.io/categories/Springboot/"/>
    
      <category term="小程序" scheme="http://wugenqiang.github.io/categories/Springboot/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="邮箱验证" scheme="http://wugenqiang.github.io/tags/%E9%82%AE%E7%AE%B1%E9%AA%8C%E8%AF%81/"/>
    
      <category term="Springboot" scheme="http://wugenqiang.github.io/tags/Springboot/"/>
    
      <category term="小程序" scheme="http://wugenqiang.github.io/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>数学笔记</title>
    <link href="http://wugenqiang.github.io/2019/03/11/math/"/>
    <id>http://wugenqiang.github.io/2019/03/11/math/</id>
    <published>2019-03-10T20:07:12.000Z</published>
    <updated>2019-03-16T11:43:06.000Z</updated>
    
    <content type="html"><![CDATA[<center>数学资料汇总</center><p><br></p><p>#高等数学</p><div class="pdf" target="https://wugenqiang.github.io/book/postgraduate/数学高数部分20190226.pdf" height></div><p>#线性代数</p><div class="pdf" target="https://wugenqiang.github.io/book/postgraduate/线性代数20190226.pdf" height></div><p><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;center&gt;数学资料汇总&lt;/center&gt;


&lt;p&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;#高等数学&lt;/p&gt;
&lt;div class=&quot;pdf&quot; target=&quot;https://wugenqiang.github.io/book/postgraduate/数学高数部分20190226.pd
      
    
    </summary>
    
      <category term="考研数学" scheme="http://wugenqiang.github.io/categories/%E8%80%83%E7%A0%94%E6%95%B0%E5%AD%A6/"/>
    
    
      <category term="数学" scheme="http://wugenqiang.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
      <category term="考研" scheme="http://wugenqiang.github.io/tags/%E8%80%83%E7%A0%94/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://wugenqiang.github.io/2019/03/09/hello-world/"/>
    <id>http://wugenqiang.github.io/2019/03/09/hello-world/</id>
    <published>2019-03-09T00:00:00.000Z</published>
    <updated>2019-03-16T11:42:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="Hexo" scheme="http://wugenqiang.github.io/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://wugenqiang.github.io/tags/Hexo/"/>
    
      <category term="HelloWorld" scheme="http://wugenqiang.github.io/tags/HelloWorld/"/>
    
  </entry>
  
</feed>
